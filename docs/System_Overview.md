# システム概要

## アーキテクチャ概要

このプロジェクトは、現代的なマイクロサービスアーキテクチャを採用した Web アプリケーションです。以下の主要コンポーネントで構成されています：

1. **フロントエンド**: React ベースの SPA (Single Page Application)
2. **バックエンド**: Spring Boot による RESTful API サービス
3. **データベース**: MySQL による永続化ストレージ
4. **認証**: Auth0 を利用した外部認証サービス

システムは Docker コンテナとして実行され、docker-compose を使用して管理されています。

## 技術スタック

### フロントエンド
- **フレームワーク**: React.js
- **ルーティング**: React Router
- **状態管理**: React Context API
- **ビルドツール**: npm
- **言語**: TypeScript
- **UI**: カスタム CSS

### バックエンド
- **フレームワーク**: Spring Boot
- **API スタイル**: RESTful
- **言語**: Kotlin
- **セッション管理**: Spring Session JDBC
- **セキュリティ**: Spring Security

### データベース
- **RDBMS**: MySQL 8.0
- **ORM**: Hibernate/JPA

### インフラストラクチャ
- **コンテナ化**: Docker
- **オーケストレーション**: Docker Compose
- **Webサーバー**: Nginx (フロントエンド配信用)

### 認証
- **認証プロバイダー**: Auth0
- **認証フロー**: Authorization Code フロー
- **セッション管理**: サーバーサイドセッション (JDBC)

## システムアーキテクチャ図

```
+-------------------+       +-------------------+       +-------------------+
|                   |       |                   |       |                   |
|    フロントエンド   |<----->|     バックエンド    |<----->|     データベース    |
|    (React SPA)    |       |   (Spring Boot)   |       |     (MySQL)      |
|                   |       |                   |       |                   |
+-------------------+       +-------------------+       +-------------------+
         ^                          ^
         |                          |
         v                          v
+-------------------+       +-------------------+
|                   |       |                   |
|      Nginx        |       |      Auth0        |
|   (Webサーバー)     |       |   (認証サービス)    |
|                   |       |                   |
+-------------------+       +-------------------+
```

## データフロー

1. ユーザーがブラウザでアプリケーションにアクセス
2. Nginx がフロントエンドの静的ファイルを提供
3. ユーザーがログインを選択すると、Auth0 の認証画面にリダイレクト
4. 認証成功後、Auth0 からコールバック URL にリダイレクト
5. フロントエンドがコードを取得し、バックエンドに送信
6. バックエンドがコードを検証し、Auth0 からトークンを取得
7. バックエンドがセッションを作成し、ユーザー情報をデータベースに保存
8. 認証済みユーザーはアプリケーション機能にアクセス可能

## コンテナ構成

- **frontend**: React アプリケーション + Nginx
- **backend**: Spring Boot アプリケーション
- **db**: MySQL データベース

各コンテナは Docker Compose で管理され、適切なネットワーク設定で連携しています。 